<div class="container my-5">
  <h2 class="mb-4 text-center text-primary">ðŸ›’ Admin Orders Dashboard</h2>

  <!-- Loader -->
  <div *ngIf="loading" class="text-center my-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>

  <!-- Empty state -->
  <div
    *ngIf="!loading && orders.length === 0"
    class="alert alert-warning text-center"
  >
    No orders requested yet.
  </div>

  <!-- Orders table -->
  <div *ngIf="!loading && orders.length > 0" class="table-responsive">
    <table class="table table-striped table-bordered table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th>ID</th>
          <th>User</th>
          <th>Products</th>
          <th>Total</th>
          <th>Status</th>
          <th>Created At</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of orders">
          <td data-label="ID">{{ order._id }}</td>
          <td data-label="User">{{ order.user?order.user.username : '' }}</td>
          <td data-label="Products">
            <ul class="list-unstyled mb-0">
              <li *ngFor="let item of order.items">
                {{ item.product?item.product.title : '' }} x {{ item.quantity }}
              </li>
            </ul>
          </td>
          <td data-label="Total">
            {{ order.totalOrderPrice | currency:'EGP':'symbol':'1.0-0' }}
          </td>
          <td data-label="Status">
            <span class="badge" [ngClass]="getBadgeClass(order.paymentStatus)">
              {{ order.paymentStatus }}
            </span>
          </td>
          <td data-label="Created At">{{ order.createdAt | date:'short' }}</td>
          <td data-label="Actions">
            <button
              class="btn btn-danger btn-sm"
              (click)="deleteOrder(order._id!)"
            >
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
